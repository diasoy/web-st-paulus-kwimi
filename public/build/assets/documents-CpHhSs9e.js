import{u as P,r as i,j as e,H as D,L as F}from"./app-DG9S_kzP.js";import{S as C,H}from"./layout-BsVTtP0q.js";import{A as S}from"./app-layout-CTsA16X9.js";import{L as f}from"./label-DK1RqIEe.js";import{a as b,B as x}from"./createLucideIcon-DTit-LMh.js";import{T as _}from"./trash-2-DGAyPjj9.js";import{X as h}from"./sheet-jWgYkTuG.js";import{U as o}from"./upload-Cux4Q1gj.js";import{S as L}from"./save-Cwfj0DjW.js";/* empty css            */import"./index-CNV89Eqk.js";import"./index-Dqxst0CE.js";import"./index-DZSqHfyJ.js";import"./index-wYigfL04.js";import"./index-BCOFxnWW.js";import"./index-BvrUvCR_.js";import"./index-sOIWG3ll.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],E=b("Download",M);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],U=b("FileText",R),$=[{title:"Document settings",href:"/settings/document"}];function te({pdfs:j=[]}){const{data:a,setData:r,post:g,processing:c,errors:m}=P({pdfs:[null,null,null,null],removePdf:[!1,!1,!1,!1]}),p={};j.forEach((s,t)=>{t<4&&(p[t]=s)});const u=i.useCallback(s=>t=>{const n=t.target.files?.[0]||null,l=[...a.pdfs];if(l[s]=n,r("pdfs",l),n){const d=[...a.removePdf];d[s]=!1,r("removePdf",d)}},[a.pdfs,a.removePdf,r]),v=i.useCallback(s=>{const t=[...a.removePdf];t[s]=!0,r("removePdf",t);const n=[...a.pdfs];n[s]=null,r("pdfs",n);const l=document.getElementById(`pdf-input-${s}`);l&&(l.value="")},[a.removePdf,r]),N=i.useCallback(s=>{const t=[...a.removePdf];t[s]=!1,r("removePdf",t)},[a.removePdf,r]),y=i.useCallback(s=>{const t=[...a.pdfs];t[s]=null,I,r("pdfs",t);const n=document.getElementById(`pdf-input-${s}`);n&&(n.value="")},[a.pdfs,r]),w=s=>{s.preventDefault(),g(route("document.store"),{forceFormData:!0,preserveScroll:!0})},k=s=>{window.open(route("document.download",s),"_blank")};return e.jsxs(S,{breadcrumbs:$,children:[e.jsx(D,{title:"Dokumen"}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(H,{title:"Unggah Dokumen",description:"Unggah dokumen penting Anda di sini."}),e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{children:"Upload PDF (maksimal 4, opsional)"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"File lama akan tetap digunakan jika tidak memilih file baru atau tidak menghapus file lama."}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[0,1,2,3].map(s=>{const t=p[s],n=a.removePdf[s],l=a.pdfs[s]!==null,d=t&&!n;return e.jsxs("div",{className:"space-y-2 p-4 border rounded-lg",children:[e.jsxs(f,{className:"text-sm font-bold",children:["Dokumen ",s+1]}),t&&!n&&!l&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-md p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-800",children:t.file_name})]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{type:"button",onClick:()=>k(t.id),className:"p-1 text-green-600 hover:bg-green-100 rounded",title:"Download",children:e.jsx(E,{className:"w-4 h-4"})}),e.jsx("button",{type:"button",onClick:()=>v(s),className:"p-1 text-red-600 hover:bg-red-100 rounded",title:"Hapus",children:e.jsx(_,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"text-xs text-green-600 mt-1",children:["Uploaded: ",new Date(t.created_at).toLocaleDateString("id-ID")]})]}),n&&t&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(h,{className:"w-4 h-4 text-red-600"}),e.jsx("span",{className:"text-sm text-red-800 line-through",children:t.file_name})]}),e.jsx("button",{type:"button",onClick:()=>N(s),className:"text-xs text-red-600 hover:text-red-800 underline",children:"Batal Hapus"})]}),e.jsx("div",{className:"text-xs text-red-600 mt-1",children:"Akan dihapus saat menyimpan"})]}),l&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm text-blue-800",children:a.pdfs[s]?.name})]}),e.jsx("button",{type:"button",onClick:()=>y(s),className:"p-1 text-red-600 hover:bg-red-100 rounded",title:"Hapus file baru",children:e.jsx(h,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"text-xs text-blue-600 mt-1",children:"File baru - belum disimpan"})]}),!d||n||l?e.jsxs("div",{children:[e.jsx("input",{type:"file",accept:"application/pdf",id:`pdf-input-${s}`,onChange:u(s),className:"hidden"}),e.jsxs("label",{htmlFor:`pdf-input-${s}`,className:"flex items-center justify-center gap-2 cursor-pointer px-3 py-2 border border-dashed border-gray-300 rounded-md text-sm bg-background hover:bg-muted transition w-full",children:[e.jsx(o,{className:"w-4 h-4"}),e.jsx("span",{children:l?"Pilih File Lain":"Pilih File PDF"})]})]}):null,d&&!l&&e.jsxs("div",{children:[e.jsx("input",{type:"file",accept:"application/pdf",id:`pdf-input-${s}`,onChange:u(s),className:"hidden"}),e.jsxs("label",{htmlFor:`pdf-input-${s}`,className:"flex items-center justify-center gap-2 cursor-pointer px-3 py-2 border border-blue-300 rounded-md text-sm text-blue-700 bg-blue-50 hover:bg-blue-100 transition w-full",children:[e.jsx(o,{className:"w-4 h-4"}),e.jsx("span",{children:"Ganti File"})]})]})]},s)})}),m.pdfs&&e.jsx("p",{className:"text-sm text-red-600",children:m.pdfs})]}),e.jsxs("div",{className:"flex gap-4 pt-4 border-t",children:[e.jsxs(x,{type:"submit",disabled:c,className:"inline-flex items-center px-4 py-2 bg-primary text-white rounded hover:opacity-90 disabled:opacity-50",onClick:()=>{setTimeout(()=>window.location.reload(),1e3)},children:[e.jsx(L,{className:"mr-2 h-4 w-4"}),c?"Menyimpan...":"Simpan Perubahan"]}),e.jsx(F,{href:"/settings/document",children:e.jsx(x,{type:"button",className:"inline-flex items-center px-4 py-2 bg-white border border-secondary text-secondary rounded hover:opacity-80",children:"Batal"})})]})]})]})})]})}export{te as default};
