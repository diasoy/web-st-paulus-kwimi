import{r as p,j as e,H as _,L as n,a as c}from"./app-C_7xbIZb.js";import{B as a}from"./createLucideIcon-CFNZbTRT.js";import{I as K}from"./input-CC6ii6gA.js";import{T as A,a as B,b as w,c as d,d as I,e as m}from"./table-WKVv4pGV.js";import{A as L,C as H}from"./app-layout-D98RgfYC.js";import{S as P}from"./search-DahMOQts.js";import{P as N}from"./plus-DZPCOgsP.js";import{U as z}from"./index-xUY6mrCc.js";import{E}from"./eye-DSxPdABX.js";import{S as R}from"./square-pen-CPqMtm0I.js";import{T as U}from"./trash-2-C938YtD5.js";import{A as $,a as M}from"./arrow-up-DhfP8vUP.js";/* empty css            */import"./sheet-DJFWz1eK.js";import"./index-D1kmJk2a.js";import"./index-Crda-Usr.js";import"./index-u-failud.js";import"./index-YRaIojVj.js";import"./index-C2pHJJ6b.js";function le({communities:t}){const h=new URLSearchParams(typeof window<"u"?window.location.search:""),[i,b]=p.useState(h.get("sort")||"name"),[o,v]=p.useState(h.get("direction")||"asc"),[l,j]=p.useState(h.get("search")||""),u=s=>{const r=s===i&&o==="asc"?"desc":"asc";b(s),v(r),c.get(typeof window<"u"?window.location.pathname:"/admin/communities",{sort:s,direction:r,search:l},{preserveState:!0,replace:!0,preserveScroll:!0})},x=({field:s})=>s!==i?e.jsx(H,{className:"ml-1 h-4 w-4 text-muted-foreground"}):o==="asc"?e.jsx($,{className:"ml-1 h-4 w-4"}):e.jsx(M,{className:"ml-1 h-4 w-4"}),f=()=>{c.get(typeof window<"u"?window.location.pathname:"/admin/communities",{search:l,sort:i,direction:o},{preserveState:!0,replace:!0,preserveScroll:!0})},y=()=>{j(""),c.get(typeof window<"u"?window.location.pathname:"/admin/communities",{sort:i,direction:o},{preserveState:!0,replace:!0,preserveScroll:!0})},S=s=>{confirm("Apakah Anda yakin ingin menghapus komunitas basis ini?")&&c.delete(`/admin/communities/${s}`)},C=s=>new Date(s).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"});return e.jsxs(L,{children:[e.jsx(_,{title:"Kelola Komunitas Basis"}),e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Kelola Komunitas Basis"}),e.jsx("p",{className:"text-muted-foreground",children:"Kelola semua komunitas basis jemaat ST. Paulus Kwimi"})]})}),e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex min-w-0 flex-1 items-center gap-2",children:[e.jsxs("div",{className:"relative w-full max-w-sm",children:[e.jsx(P,{className:"absolute top-2.5 left-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(K,{value:l,onChange:s=>j(s.target.value),onKeyDown:s=>s.key==="Enter"&&f(),placeholder:"Cari komunitas...",className:"h-9 pl-8 text-sm"})]}),e.jsx(a,{size:"sm",className:"text-white hover:bg-primary/90",onClick:f,children:"Cari"}),l&&e.jsx(a,{size:"sm",variant:"outline",onClick:y,children:"Reset"})]}),e.jsx(n,{href:"/admin/communities/create",className:"shrink-0 sm:ml-4",children:e.jsxs(a,{className:"px-2 sm:px-4 text-white hover:bg-primary/90",children:[e.jsx(N,{className:"h-4 w-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Tambah Komunitas"})]})})]}),e.jsx("div",{children:t.data.length===0?e.jsxs("div",{className:"py-12 text-center",children:[e.jsx("p",{className:"text-muted-foreground",children:"Belum ada komunitas basis"}),e.jsx(n,{href:"/admin/communities/create",children:e.jsxs(a,{className:"mt-4",children:[e.jsx(N,{className:"mr-2 h-4 w-4"}),"Buat Komunitas Pertama"]})})]}):e.jsx("div",{className:"rounded-md border",children:e.jsxs(A,{children:[e.jsx(B,{children:e.jsxs(w,{className:"bg-muted/60",children:[e.jsx(d,{className:"pl-6",children:e.jsxs("button",{type:"button",onClick:()=>u("name"),className:"flex items-center font-semibold hover:text-foreground/90",children:["Nama Komunitas",e.jsx(x,{field:"name"})]})}),e.jsx(d,{children:e.jsxs("button",{type:"button",onClick:()=>u("users_count"),className:"flex items-center font-semibold hover:text-foreground/90",children:["Anggota",e.jsx(x,{field:"users_count"})]})}),e.jsx(d,{children:e.jsxs("button",{type:"button",onClick:()=>u("created_at"),className:"flex items-center font-semibold hover:text-foreground/90",children:["Tanggal Dibuat",e.jsx(x,{field:"created_at"})]})}),e.jsx(d,{className:"pr-6 text-right",children:"Aksi"})]})}),e.jsx(I,{children:t.data.map(s=>e.jsxs(w,{children:[e.jsx(m,{className:"pl-6 font-medium",children:s.name}),e.jsx(m,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:s.users_count||0}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"anggota"})]})}),e.jsx(m,{className:"text-sm text-muted-foreground",children:C(s.created_at)}),e.jsx(m,{className:"pr-6 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(a,{variant:"outline",size:"sm",asChild:!0,className:"bg-secondary hover:bg-secondary/90",children:e.jsx(n,{href:`/admin/communities/${s.id}`,children:e.jsx(E,{className:"h-4 w-4"})})}),e.jsx(a,{variant:"outline",size:"sm",asChild:!0,className:"bg-primary hover:bg-primary/90",children:e.jsx(n,{href:`/admin/communities/${s.id}/edit`,children:e.jsx(R,{className:"h-4 w-4"})})}),e.jsx(a,{variant:"destructive",size:"sm",onClick:()=>S(s.id),children:e.jsx(U,{className:"h-4 w-4"})})]})})]},s.id))})]})})}),t.links&&t.links.length>3&&e.jsx("div",{className:"flex justify-center space-x-2 pt-4",children:t.links.map((s,r)=>{const g="px-3 py-1 rounded-md font-medium transition-all duration-150 border cursor-pointer",k="bg-secondary text-white border-secondary hover:opacity-80",T="bg-white text-secondary border-secondary hover:opacity-80",D="bg-secondary text-muted-foreground border-secondary opacity-60 cursor-not-allowed";return s.url?e.jsx(n,{href:s.url,className:g+" "+(s.active?k:T),dangerouslySetInnerHTML:{__html:s.label}},r):e.jsx("span",{className:g+" "+D,dangerouslySetInnerHTML:{__html:s.label}},r)})})]})]})}export{le as default};
