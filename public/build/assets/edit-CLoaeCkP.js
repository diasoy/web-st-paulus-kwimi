import{r as h,u as N,j as e,H as b,L as n}from"./app-C6gMg_n5.js";import{B as c}from"./createLucideIcon-CCJLh033.js";import{C as v,a as k,b as C,c as y}from"./card-Vci2eeqr.js";import{C as S}from"./checkbox-BvTgnYKG.js";import{I as _}from"./input-CuJ7phD5.js";import{L as l}from"./label-C2_ZRJjV.js";import{T as E}from"./textarea-u71jIPWp.js";import{A as P}from"./app-layout-DEqCZiHy.js";import{X as w}from"./sheet-C_jGxhCv.js";import{S as F}from"./save-ChHfmaBI.js";/* empty css            */import"./index-DWDvq47i.js";import"./index-CdWI2V1N.js";import"./index-CwTkrfdC.js";import"./index-F6TSubN6.js";import"./index-jlQ9R2_E.js";import"./index-DhbgspBr.js";import"./index-3ETa40gf.js";function Q({announcement:s}){const[o,x]=h.useState(""),m=h.useRef(null),{data:t,setData:r,post:u,processing:p,errors:a}=N({_method:"PUT",title:s.title,description:s.description,image:null,is_publish:s.is_publish}),g=i=>{i.preventDefault(),u(route("admin.announcements.update",s.id),{forceFormData:!0,preserveScroll:!0})},j=i=>{const d=i.target.files?.[0]||null;d&&d.size>2*1024*1024?(x("Ukuran gambar maksimal 2MB. Silakan pilih gambar lain."),r("image",null)):(x(""),r("image",d))},f=()=>{r("image",null),m.current&&(m.current.value="")};return e.jsxs(P,{children:[e.jsx(b,{title:`Edit Pengumuman - ${s.title}`}),e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("nav",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(n,{href:route("admin.announcements.index"),className:"hover:text-foreground",children:"Pengumuman"}),e.jsx("span",{className:"mx-2",children:"/"}),e.jsx(n,{href:route("admin.announcements.show",s.id),className:"hover:text-foreground",children:"Detail"}),e.jsx("span",{className:"mx-2",children:"/"}),e.jsx("span",{className:"text-foreground",children:"Edit"})]}),e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Edit Pengumuman"})]}),e.jsxs(v,{children:[e.jsx(k,{children:e.jsx(C,{children:"Form Pengumuman"})}),e.jsx(y,{children:e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(l,{htmlFor:"title",children:"Judul Pengumuman *"}),e.jsx(_,{id:"title",type:"text",value:t.title,onChange:i=>r("title",i.target.value),className:a.title?"border-red-500":"",required:!0}),a.title&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:a.title})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(l,{htmlFor:"description",children:"Deskripsi Singkat *"}),e.jsx(E,{id:"description",value:t.description,onChange:i=>r("description",i.target.value),className:a.description?"border-red-500":"",rows:4,required:!0}),a.description&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:a.description})]}),s.image_url&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(l,{children:"Gambar Saat Ini"}),e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:`/storage/${s.image_url}`,alt:s.title,className:"h-40 rounded-md border"})})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(l,{htmlFor:"image",children:"Ganti Gambar (opsional)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{ref:m,id:"image",type:"file",accept:"image/*",onChange:j,className:a.image?"border-red-500":""}),o&&e.jsx("div",{style:{color:"red",fontSize:"0.875rem",marginLeft:8},children:o}),t.image&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:t.image.name}),e.jsx(c,{type:"button",variant:"ghost",size:"sm",onClick:f,className:"h-6 w-6 p-0",children:e.jsx(w,{className:"h-3 w-3"})})]})]}),a.image&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:a.image})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(S,{id:"is_publish",checked:!!t.is_publish,onCheckedChange:i=>r("is_publish",!!i)}),e.jsx(l,{htmlFor:"is_publish",className:"text-sm",children:"Publikasikan"})]})})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(n,{href:route("admin.announcements.show",s.id),children:e.jsx(c,{type:"button",variant:"outline",className:"text-black border hover:bg-muted hover:text-black",children:"Batal"})}),e.jsxs(c,{type:"submit",disabled:p,className:"text-white hover:bg-primary/90",children:[e.jsx(F,{className:"mr-2 h-4 w-4"}),p?"Menyimpan...":"Simpan Perubahan"]})]})]})})]})]})]})}export{Q as default};
