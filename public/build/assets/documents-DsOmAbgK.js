import{u as k,r as o,j as e,H as P,L as D}from"./app-DwxCO3Dx.js";import{S as F,H as C}from"./layout-CMJIBG23.js";import{A as S}from"./app-layout-Jtoo5ZRE.js";import{L as f}from"./label-DpRDAzaE.js";import{B as x}from"./createLucideIcon-sNdPZZvO.js";import{F as L}from"./file-text-DrfbC5cp.js";import{X as h}from"./sheet-CozYEq8J.js";import{U as i}from"./upload-Balqy6KY.js";import{D as E}from"./download-iGUfDJJA.js";import{T as H}from"./trash-2-C2Fgr1mZ.js";import{S as R}from"./save-5vbb6mbo.js";/* empty css            */import"./index-DwVpzYI3.js";import"./index-DBF5QzXT.js";import"./index-NNHTcOwf.js";import"./index-C9Kq2w53.js";import"./index-BQGN3-SZ.js";import"./index-cAa5iw5E.js";import"./index-BqOTuGB0.js";const U=[{title:"Document settings",href:"/settings/document"}];function ee({pdfs:b=[]}){const{data:a,setData:l,post:j,processing:c,errors:m}=k({pdfs:[null,null,null,null],removePdf:[!1,!1,!1,!1]}),p={};b.forEach((s,t)=>{t<4&&(p[t]=s)});const u=o.useCallback(s=>t=>{const r=t.target.files?.[0]||null,n=[...a.pdfs];if(n[s]=r,l("pdfs",n),r){const d=[...a.removePdf];d[s]=!1,l("removePdf",d)}},[a.pdfs,a.removePdf,l]),g=o.useCallback(s=>{const t=[...a.removePdf];t[s]=!0,l("removePdf",t);const r=[...a.pdfs];r[s]=null,l("pdfs",r);const n=document.getElementById(`pdf-input-${s}`);n&&(n.value="")},[a.removePdf,l]),v=o.useCallback(s=>{const t=[...a.removePdf];t[s]=!1,l("removePdf",t)},[a.removePdf,l]),N=o.useCallback(s=>{const t=[...a.pdfs];t[s]=null,l("pdfs",t);const r=document.getElementById(`pdf-input-${s}`);r&&(r.value="")},[a.pdfs,l]),y=s=>{s.preventDefault(),j(route("document.store"),{forceFormData:!0,preserveScroll:!0})},w=s=>{window.open(route("document.download",s),"_blank")};return e.jsxs(S,{breadcrumbs:U,children:[e.jsx(P,{title:"Dokumen"}),e.jsx(F,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(C,{title:"Unggah Dokumen",description:"Unggah dokumen penting Anda di sini."}),e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{children:"Upload PDF (maksimal 4, opsional)"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"File lama akan tetap digunakan jika tidak memilih file baru atau tidak menghapus file lama."}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[0,1,2,3].map(s=>{const t=p[s],r=a.removePdf[s],n=a.pdfs[s]!==null,d=t&&!r;return e.jsxs("div",{className:"space-y-2 p-4 border rounded-lg",children:[e.jsxs(f,{className:"text-sm font-bold",children:["Dokumen ",s+1]}),t&&!r&&!n&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(L,{className:"w-4 h-4 text-green-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-sm font-medium text-green-800 block",children:t.file_name}),e.jsxs("div",{className:"text-xs text-green-600 mt-1",children:["Uploaded: ",new Date(t.created_at).toLocaleDateString("id-ID")]})]})]})}),r&&t&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(h,{className:"w-4 h-4 text-red-600"}),e.jsx("span",{className:"text-sm text-red-800 line-through",children:t.file_name})]}),e.jsx("button",{type:"button",onClick:()=>v(s),className:"px-3 py-1 text-xs text-red-600 hover:text-red-800 hover:bg-red-100 rounded-md transition-colors border border-red-200",children:"Batal Hapus"})]}),e.jsx("div",{className:"text-xs text-red-600 mt-1",children:"Akan dihapus saat menyimpan"})]}),n&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(i,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm text-blue-800",children:a.pdfs[s]?.name})]}),e.jsx("button",{type:"button",onClick:()=>N(s),className:"p-2 text-red-600 hover:bg-red-100 rounded-md transition-colors",title:"Hapus file baru",children:e.jsx(h,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"text-xs text-blue-600 mt-1",children:"File baru - belum disimpan"})]}),!d||r||n?e.jsxs("div",{children:[e.jsx("input",{type:"file",accept:"application/pdf",id:`pdf-input-${s}`,onChange:u(s),className:"hidden"}),e.jsxs("label",{htmlFor:`pdf-input-${s}`,className:"flex items-center justify-center gap-2 cursor-pointer px-3 py-2 border border-dashed border-gray-300 rounded-md text-sm bg-background hover:bg-muted transition w-full",children:[e.jsx(i,{className:"w-4 h-4"}),e.jsx("span",{children:n?"Pilih File Lain":"Pilih File PDF"})]})]}):null,d&&!n&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"file",accept:"application/pdf",id:`pdf-input-${s}`,onChange:u(s),className:"hidden"}),e.jsxs("label",{htmlFor:`pdf-input-${s}`,className:"flex items-center justify-center gap-2 cursor-pointer px-3 py-2 border border-blue-300 rounded-md text-sm text-blue-700 bg-blue-50 hover:bg-blue-100 transition w-full",children:[e.jsx(i,{className:"w-4 h-4"}),e.jsx("span",{children:"Ganti File"})]})]}),e.jsx("button",{type:"button",onClick:()=>w(t.id),className:"px-3 py-2 text-green-600 hover:bg-green-100 rounded-md transition-colors border border-green-300",title:"Download",children:e.jsx(E,{className:"w-4 h-4"})}),e.jsx("button",{type:"button",onClick:()=>g(s),className:"px-3 py-2 text-red-600 hover:bg-red-100 rounded-md transition-colors border border-red-300",title:"Hapus",children:e.jsx(H,{className:"w-4 h-4"})})]})]},s)})}),m.pdfs&&e.jsx("p",{className:"text-sm text-red-600",children:m.pdfs})]}),e.jsxs("div",{className:"flex gap-4 pt-4 border-t",children:[e.jsxs(x,{type:"submit",disabled:c,className:"inline-flex items-center px-4 py-2 bg-primary text-white rounded hover:opacity-90 disabled:opacity-50",onClick:()=>{setTimeout(()=>window.location.reload(),1e3)},children:[e.jsx(R,{className:"mr-2 h-4 w-4"}),c?"Menyimpan...":"Simpan Perubahan"]}),e.jsx(D,{href:"/settings/document",children:e.jsx(x,{type:"button",className:"inline-flex items-center px-4 py-2 bg-white border border-secondary text-secondary rounded hover:opacity-80",children:"Batal"})})]})]})]})})]})}export{ee as default};
