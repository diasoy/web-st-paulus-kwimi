import{j as e,H as u,u as w,L as h}from"./app-3pXV_ZTR.js";import{B as p}from"./createLucideIcon-Big9a01N.js";import{I as m}from"./input-BPL5VnBo.js";import{L as l}from"./label-g7uh2A66.js";import{A as g}from"./app-layout-wXaori0w.js";import{U as k}from"./upload-Dcw3rYob.js";import{S as _}from"./save-Bihk1BFI.js";/* empty css            */import"./index-C7i9Sxjm.js";import"./sheet-DhFIG8hb.js";import"./index-B8kjP8L0.js";import"./index-Dw0Vgt02.js";import"./index-X02O5FkN.js";import"./index-CFZrxKvB.js";import"./index-cQAwu3rO.js";function G({user:t,communities:c}){if(console.log("UserEdit called with:",{user:t,communities:c}),console.log("DEBUG birth_place:",t.birth_place),!t)return e.jsxs(g,{children:[e.jsx(u,{title:"Edit Umat"}),e.jsx("div",{className:"p-6",children:e.jsx("p",{children:"Data Umat tidak ditemukan."})})]});const f=a=>{if(!a)return"";const d=new Date(a);if(isNaN(d.getTime()))return"";const o=d.getFullYear(),n=String(d.getMonth()+1).padStart(2,"0"),v=String(d.getDate()).padStart(2,"0");return`${o}-${n}-${v}`},b=Array.isArray(t.pdfs)?t.pdfs:[],{data:r,setData:i,post:j,processing:x,errors:s}=w({_method:"PUT",name:t.name??"",username:t.username??"",birth_place:t.birth_place!==void 0&&t.birth_place!==null?String(t.birth_place):"",address:t.address??"",birth_date:f(t.birth_date),gender:t.gender??"male",status:t.status??"active",community_id:t.community_id??null,pdfs:[null,null,null,null],existingPdfs:b,removePdf:[!1,!1,!1,!1]}),y=a=>d=>{const o=d.target.files?.[0]||null,n=[...r.pdfs];n[a]=o,i("pdfs",n)},N=a=>{a.preventDefault(),j(route("admin.users.update",t.id),{forceFormData:!0,preserveScroll:!0})};return e.jsxs(g,{children:[e.jsx(u,{title:`Edit Umat - ${t.name}`}),e.jsxs("div",{className:"space-y-6 p-6 min-h-screen",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("nav",{className:"flex items-center text-sm text-white",children:[e.jsx(h,{href:route("admin.users"),className:"hover:text-gray-300 transition-colors",children:"Umat"}),e.jsx("span",{className:"mx-2 text-gray-300",children:"/"}),e.jsx(h,{href:route("admin.users.show",t.id),className:"hover:text-gray-300 transition-colors",children:"Detail"}),e.jsx("span",{className:"mx-2 text-gray-300",children:"/"}),e.jsx("span",{className:"text-white font-medium",children:"Edit"})]}),e.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:"Edit Umat"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Edit Umat"}),e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"name",className:"text-white font-medium",children:"Nama Lengkap *"}),e.jsx(m,{id:"name",type:"text",value:r.name,onChange:a=>i("name",a.target.value),placeholder:"Masukkan nama lengkap",className:"bg-white text-black border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:!0}),s.name&&e.jsx("p",{className:"text-sm text-red-600",children:s.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"username",className:"text-white font-medium",children:"Username *"}),e.jsx(m,{id:"username",type:"text",value:r.username,onChange:a=>i("username",a.target.value),placeholder:"Masukkan username",className:"bg-white text-black border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:!0}),s.username&&e.jsx("p",{className:"text-sm text-red-600",children:s.username})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"birth_place",className:"text-white font-medium",children:"Tempat Lahir"}),e.jsx(m,{id:"birth_place",type:"text",value:r.birth_place,onChange:a=>i("birth_place",a.target.value),placeholder:"Masukkan tempat lahir",className:"bg-white text-black border-gray-300 focus:border-blue-500 focus:ring-blue-500"}),s.birth_place&&e.jsx("p",{className:"text-sm text-red-600",children:s.birth_place})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"birth_date",className:"text-white font-medium",children:"Tanggal Lahir"}),e.jsx(m,{id:"birth_date",type:"date",value:r.birth_date,onChange:a=>i("birth_date",a.target.value),className:"bg-white text-black border-gray-300 focus:border-blue-500 focus:ring-blue-500"}),s.birth_date&&e.jsx("p",{className:"text-sm text-red-600",children:s.birth_date})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"gender",className:"text-white font-medium",children:"Gender *"}),e.jsxs("select",{id:"gender",value:r.gender,onChange:a=>i("gender",a.target.value),className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"male",children:"Laki-laki"}),e.jsx("option",{value:"female",children:"Perempuan"})]}),s.gender&&e.jsx("p",{className:"text-sm text-red-600",children:s.gender})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"community_id",className:"text-white font-medium",children:"Komunitas Basis"}),e.jsxs("select",{id:"community_id",value:r.community_id||"",onChange:a=>i("community_id",a.target.value?parseInt(a.target.value):null),className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Tidak ada"}),c&&c.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]}),s.community_id&&e.jsx("p",{className:"text-sm text-red-600",children:s.community_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"status",className:"text-white font-medium",children:"Status *"}),e.jsxs("select",{id:"status",value:r.status,onChange:a=>i("status",a.target.value),className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"active",children:"Aktif"}),e.jsx("option",{value:"inactive",children:"Nonaktif"})]}),s.status&&e.jsx("p",{className:"text-sm text-red-600",children:s.status})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"address",className:"text-white font-medium",children:"Alamat"}),e.jsx("textarea",{id:"address",value:r.address,onChange:a=>i("address",a.target.value),placeholder:"Masukkan alamat lengkap",className:"flex min-h-[80px] w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 placeholder:text-gray-500 focus:border-blue-500 focus:ring-blue-500 focus:outline-none",rows:3}),s.address&&e.jsx("p",{className:"text-sm text-red-600",children:s.address})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{className:"text-white font-medium",children:"Upload PDF (maksimal 4, opsional)"}),e.jsx("p",{className:"text-xs text-gray-300 mb-2",children:"File lama akan tetap digunakan jika tidak memilih file baru atau tidak menghapus file lama."}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[0,1,2,3].map(a=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs(l,{className:"text-xs font-bold text-white",children:["Dokumen ",a+1]}),r.existingPdfs&&r.existingPdfs[a]&&!r.removePdf[a]&&e.jsxs("div",{className:"text-xs text-gray-300 mb-1",children:["Dokumen yang sudah ada: ",e.jsx("span",{className:"font-semibold text-white",children:r.existingPdfs[a].file_name})]}),e.jsx("input",{type:"file",accept:"application/pdf",id:`pdf-input-${a}`,onChange:y(a),className:"hidden"}),e.jsxs("label",{htmlFor:`pdf-input-${a}`,className:"flex items-center gap-2 cursor-pointer px-3 py-2 border border-gray-300 rounded-md text-sm bg-white hover:bg-gray-50 transition text-gray-700",children:[e.jsx(k,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:"Pilih File"})]}),r.pdfs[a]&&e.jsxs("div",{className:"mt-1 text-sm text-gray-300",children:["File baru: ",e.jsx("span",{className:"font-medium text-white",children:r.pdfs[a]?.name})]})]},a))}),s.pdfs&&e.jsx("p",{className:"text-sm text-red-600",children:s.pdfs})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsxs(p,{type:"submit",disabled:x,className:"bg-green-600 text-white hover:bg-green-700 disabled:bg-green-400",children:[e.jsx(_,{className:"mr-2 h-4 w-4"}),x?"Menyimpan...":"Simpan Perubahan"]})," ",e.jsx(h,{href:route("admin.users.show",t.id),children:e.jsx(p,{type:"button",variant:"outline",className:"bg-white text-gray-700 border-gray-300 hover:bg-gray-50 hover:text-gray-900",children:"Batal"})})]})]})]})]})]})}export{G as default};
