import{b as I,r as h,j as e,H as B,a as m,L as u}from"./app-C_7xbIZb.js";import{B as L}from"./badge-D8AfyJTT.js";import{B as a}from"./createLucideIcon-CFNZbTRT.js";import{I as A}from"./input-CC6ii6gA.js";import{T as H,a as E,b as y,c as i,d as z,e as l}from"./table-WKVv4pGV.js";import{A as K,C as R}from"./app-layout-D98RgfYC.js";import{S as M}from"./search-DahMOQts.js";import{P as v}from"./plus-DZPCOgsP.js";import{I as U}from"./image-72HUR2Ma.js";import{E as $}from"./eye-DSxPdABX.js";import{S as q}from"./square-pen-CPqMtm0I.js";import{T as F}from"./trash-2-C938YtD5.js";import{A as G,a as J}from"./arrow-up-DhfP8vUP.js";/* empty css            */import"./sheet-DJFWz1eK.js";import"./index-xUY6mrCc.js";import"./index-D1kmJk2a.js";import"./index-Crda-Usr.js";import"./index-u-failud.js";import"./index-YRaIojVj.js";import"./index-C2pHJJ6b.js";const O={"pagination.next":"Berikutnya","pagination.previous":"Sebelumnya","pagination.first":"Pertama","pagination.last":"Terakhir"},Q=t=>O[t]||t;function ge({announcements:t}){const{props:x}=I(),[N,f]=h.useState(null),p=new URLSearchParams(typeof window<"u"?window.location.search:""),[n,w]=h.useState(p.get("search")||""),[o,S]=h.useState(p.get("sort")||"created_at"),[d,C]=h.useState(p.get("direction")||"desc"),g=s=>{const r=s===o&&d==="asc"?"desc":"asc";S(s),C(r),m.get(route("admin.announcements.index"),{search:n,sort:s,direction:r},{preserveState:!0,replace:!0,preserveScroll:!0})},j=({field:s})=>s!==o?e.jsx(R,{className:"ml-1 h-4 w-4 text-muted-foreground"}):d==="asc"?e.jsx(G,{className:"ml-1 h-4 w-4"}):e.jsx(J,{className:"ml-1 h-4 w-4"}),T=(s,r)=>{confirm(`Hapus pengumuman:

"${r}"?`)&&(f(s),m.delete(route("admin.announcements.destroy",s),{preserveScroll:!0,onFinish:()=>f(null)}))},_=s=>new Date(s).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs(K,{children:[e.jsx(B,{title:"Kelola Pengumuman"}),e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Kelola Pengumuman"}),e.jsx("p",{className:"text-muted-foreground",children:"Kelola semua pengumuman untuk jemaat ST. Paulus Kwimi"})]})}),e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex min-w-0 flex-1 items-center gap-2",children:[e.jsxs("div",{className:"relative w-full max-w-sm",children:[e.jsx(M,{className:"absolute top-2.5 left-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(A,{value:n,onChange:s=>w(s.target.value),onKeyDown:s=>s.key==="Enter"&&m.get(route("admin.announcements.index"),{search:n,sort:o,direction:d},{preserveState:!0,replace:!0,preserveScroll:!0}),placeholder:"Cari pengumuman...",className:"h-9 pl-8 text-sm"})]}),e.jsx(a,{size:"sm",className:"bg-primary hover:bg-primary/90 text-white",onClick:()=>m.get(route("admin.announcements.index"),{search:n,sort:o,direction:d},{preserveState:!0,replace:!0,preserveScroll:!0}),children:"Cari"}),n&&e.jsx(a,{size:"sm",variant:"outline",onClick:()=>m.get(route("admin.announcements.index"),{sort:o,direction:d},{preserveState:!0,replace:!0,preserveScroll:!0}),children:"Reset"})]}),e.jsx(u,{href:route("admin.announcements.create"),className:"shrink-0",children:e.jsxs(a,{className:"px-2 sm:px-4 text-white bg-primary hover:bg-primary/90",children:[e.jsx(v,{className:"h-4 w-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Tambah Pengumuman"})]})})]}),x.flash?.success&&e.jsx("div",{className:"rounded-md border border-green-200 bg-green-50 px-4 py-3 text-sm text-green-800",children:x.flash.success}),x.flash?.error&&e.jsx("div",{className:"rounded-md border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-800",children:x.flash.error}),t.data.length===0?e.jsxs("div",{className:"py-8 text-center",children:[e.jsx("p",{className:"text-muted-foreground",children:"Belum ada pengumuman"}),e.jsx(u,{href:route("admin.announcements.create"),children:e.jsxs(a,{className:"mt-4",children:[e.jsx(v,{className:"mr-2 h-4 w-4"}),"Buat Pengumuman Pertama"]})})]}):e.jsx("div",{className:"rounded-md border",children:e.jsxs(H,{children:[e.jsx(E,{children:e.jsxs(y,{className:"bg-muted/60",children:[e.jsx(i,{children:"Gambar"}),e.jsx(i,{children:e.jsxs("button",{type:"button",onClick:()=>g("title"),className:"flex items-center font-semibold hover:text-foreground/90",children:["Judul",e.jsx(j,{field:"title"})]})}),e.jsx(i,{children:"Deskripsi"}),e.jsx(i,{children:e.jsxs("button",{type:"button",onClick:()=>g("is_publish"),className:"flex items-center font-semibold hover:text-foreground/90",children:["Status",e.jsx(j,{field:"is_publish"})]})}),e.jsx(i,{children:e.jsxs("button",{type:"button",onClick:()=>g("created_at"),className:"flex items-center font-semibold hover:text-foreground/90",children:["Tanggal Dibuat",e.jsx(j,{field:"created_at"})]})}),e.jsx(i,{className:"text-right",children:"Aksi"})]})}),e.jsx(z,{children:t.data.map(s=>e.jsxs(y,{children:[e.jsxs(l,{children:[s.image_url?e.jsx("img",{src:`/storage/${s.image_url}`,alt:s.title,className:"h-10 w-14 rounded object-cover",onError:r=>{r.currentTarget.style.display="none";const c=r.currentTarget.nextSibling||null;c&&(c.style.display="flex")}}):null,e.jsx("div",{className:"flex h-10 w-14 items-center justify-center rounded bg-muted text-muted-foreground",style:{display:s.image_url?"none":"flex"},children:e.jsx(U,{className:"h-4 w-4"})})]}),e.jsx(l,{className:"font-medium",children:s.title}),e.jsx(l,{className:"max-w-md",children:e.jsx("div",{className:"truncate",children:s.description})}),e.jsx(l,{children:e.jsx(L,{className:"text-white",variant:s.is_publish?"default":"secondary",children:s.is_publish?"Dipublish":"Draft"})}),e.jsx(l,{className:"text-sm text-muted-foreground",children:_(s.created_at)}),e.jsx(l,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(a,{variant:"outline",size:"sm",asChild:!0,className:"bg-secondary hover:bg-secondary/90",children:e.jsx(u,{href:route("admin.announcements.show",s.id),children:e.jsx($,{className:"h-4 w-4"})})}),e.jsx(a,{variant:"outline",size:"sm",asChild:!0,className:"bg-primary hover:bg-primary/90",children:e.jsx(u,{href:route("admin.announcements.edit",s.id),children:e.jsx(q,{className:"h-4 w-4"})})}),e.jsx(a,{variant:"destructive",size:"sm",onClick:()=>T(s.id,s.title),disabled:N===s.id,children:e.jsx(F,{className:"h-4 w-4"})})]})})]},s.id))})]})}),t.links&&t.links.length>3&&e.jsx("div",{className:"flex justify-center space-x-2",children:t.links.map((s,r)=>{const c="px-3 py-1 rounded-md font-medium transition-all duration-150 border cursor-pointer",k="bg-secondary text-white border-secondary hover:opacity-80",D="bg-white text-secondary border-secondary hover:opacity-80",P="bg-secondary text-muted-foreground border-secondary opacity-60 cursor-not-allowed",b=Q(s.label);return s.url?e.jsx(u,{href:s.url,className:c+" "+(s.active?k:D),dangerouslySetInnerHTML:{__html:b}},r):e.jsx("span",{className:c+" "+P,dangerouslySetInnerHTML:{__html:b}},r)})})]})]})}export{ge as default};
